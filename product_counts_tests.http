### Variables
@baseUrl = http://localhost:3015/api/v1

###############################################################################
# ğŸ“Š TESTING ENDPOINT DE CONTEOS DE PRODUCTOS POR CATEGORÃA
###############################################################################

### 1. ğŸ“Š Obtener todos los conteos (configuraciÃ³n por defecto)
# includeParents=true, includeLeaves=true, rollupParents=true
GET {{baseUrl}}/categories/product-counts
Content-Type: application/json

### 2. ğŸ“Š Obtener solo conteos de categorÃ­as padre (con rollup)
GET {{baseUrl}}/categories/product-counts?includeParents=true&includeLeaves=false&rollupParents=true
Content-Type: application/json

### 3. ğŸ“Š Obtener solo conteos de categorÃ­as hoja (sin rollup)
GET {{baseUrl}}/categories/product-counts?includeParents=false&includeLeaves=true&rollupParents=false
Content-Type: application/json

### 4. ğŸ“Š Obtener conteos directos sin rollup (padres = solo productos directos)
GET {{baseUrl}}/categories/product-counts?includeParents=true&includeLeaves=true&rollupParents=false
Content-Type: application/json

### 5. ğŸ” Conteos con filtros de productos - Solo productos en stock
GET {{baseUrl}}/categories/product-counts?inStock=true
Content-Type: application/json

### 6. â­ Conteos con filtros de productos - Solo productos destacados
GET {{baseUrl}}/categories/product-counts?featured=true
Content-Type: application/json

### 7. ğŸ“ Conteos con bÃºsqueda de texto
GET {{baseUrl}}/categories/product-counts?search=bong
Content-Type: application/json

### 8. ğŸ”„ CombinaciÃ³n de filtros - En stock Y destacados
GET {{baseUrl}}/categories/product-counts?inStock=true&featured=true
Content-Type: application/json

### 9. ğŸ“Š Solo padres con rollup y productos en stock
GET {{baseUrl}}/categories/product-counts?includeParents=true&includeLeaves=false&rollupParents=true&inStock=true
Content-Type: application/json

### 10. ğŸ§ª ConfiguraciÃ³n especÃ­fica para testing
# Solo hojas, sin rollup, productos especÃ­ficos
GET {{baseUrl}}/categories/product-counts?includeParents=false&includeLeaves=true&rollupParents=false&search=pipa
Content-Type: application/json

###############################################################################
# ğŸ“‹ CASOS EDGE Y VALIDACIONES
###############################################################################

### 11. âŒ Sin parÃ¡metros (deberÃ­a usar defaults)
GET {{baseUrl}}/categories/product-counts
Content-Type: application/json

### 12. âŒ ParÃ¡metros invÃ¡lidos (deberÃ­a manejar gracefully)
GET {{baseUrl}}/categories/product-counts?includeParents=invalid&includeLeaves=123&rollupParents=xyz
Content-Type: application/json

### 13. ğŸ” BÃºsqueda que no coincide con nada
GET {{baseUrl}}/categories/product-counts?search=categoriaquenoexiste123
Content-Type: application/json

### 14. âš¡ Test de performance con todos los filtros
GET {{baseUrl}}/categories/product-counts?includeParents=true&includeLeaves=true&rollupParents=true&inStock=true&featured=false&search=
Content-Type: application/json

###############################################################################
# ğŸ“ˆ COMPARACIÃ“N CON ENDPOINT INDIVIDUAL
###############################################################################

### 15. ğŸ“‹ Comparar con endpoint individual de categorÃ­as
# Para verificar que los conteos coinciden
GET {{baseUrl}}/categories?limit=50
Content-Type: application/json

### 16. ğŸ¯ Obtener categorÃ­a especÃ­fica para comparar conteos
# Reemplazar con un ID vÃ¡lido de tu base de datos
GET {{baseUrl}}/categories/68b47d8ce2a98ab7c43623f9
Content-Type: application/json

###############################################################################
# ğŸ“ NOTAS DE TESTING
###############################################################################

# Respuesta esperada:
# {
#   "success": true,
#   "data": {
#     "counts": {
#       "68b47d8ce2a98ab7c43623f9": 42,  // CHUCHES (padre) con rollup
#       "68b771c839cea21795777011": 7,   // Armadores (hoja)
#       "68b7715539cea21795776e91": 0    // Bandejas (sin productos)
#     },
#     "updatedAt": "2025-09-04T12:34:56.000Z"
#   }
# }

# Casos a verificar:
# - rollupParents=true: padres suman todos los productos de sus descendientes
# - rollupParents=false: padres solo cuentan productos directamente asignados
# - includeParents=false: no incluir categorÃ­as que tienen hijos
# - includeLeaves=false: no incluir categorÃ­as sin hijos
# - Filtros inStock/featured se aplican antes del conteo
# - BÃºsqueda search se aplica a los productos, no a las categorÃ­as
